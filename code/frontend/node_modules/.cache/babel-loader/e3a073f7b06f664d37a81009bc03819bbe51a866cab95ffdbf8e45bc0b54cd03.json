{"ast":null,"code":"import _objectSpread from\"/home/michelestaffieri/Documenti/Taass/CivicLife/CivicLife/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/michelestaffieri/Documenti/Taass/CivicLife/CivicLife/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/michelestaffieri/Documenti/Taass/CivicLife/CivicLife/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/michelestaffieri/Documenti/Taass/CivicLife/CivicLife/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/michelestaffieri/Documenti/Taass/CivicLife/CivicLife/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{AppBar,Button,Chip,Grid,IconButton,Typography}from\"@mui/material\";import'../App.css';import React,{useEffect,useState}from\"react\";import Box from'@mui/material/Box';import{CssTextField}from\"../Utils/CustomComponents\";import{useLocation,useNavigate}from\"react-router-dom\";import Toolbar from\"@mui/material/Toolbar\";import ArrowBackIcon from\"@mui/icons-material/ArrowBack\";import{isInstanceOfAuthError,logoutUser}from\"../APIs/OauthAPI\";import AccountCircleIcon from\"@mui/icons-material/AccountCircle\";import FormControl from\"@mui/material/FormControl\";import MenuItem from\"@mui/material/MenuItem\";import{getAllUsersEmail,UserStatus}from\"../APIs/UsersAPI\";import dayjs from\"dayjs\";import{changeOrganizers,deleteInitiative,getInitiativeByID,InitiativeType,InitiativeTypeColor,modifyInitiative,subscribeInitiative,unsubscribeInitiative}from\"../APIs/InitiativeAPI\";import{AdapterDayjs}from\"@mui/x-date-pickers/AdapterDayjs\";import{DatePicker,LocalizationProvider}from\"@mui/x-date-pickers\";import MuiAlert from\"@mui/material/Alert\";import Snackbar from\"@mui/material/Snackbar\";import Stack from\"@mui/material/Stack\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var InitiativeDetails=function InitiativeDetails(){var location=useLocation();var initiativePassed=location.state.initiative;var tokenData=location.state.token;var user=location.state.user;var isVisitor=location.state.isVisitor;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),initiative=_useState2[0],setInitiative=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),modifiedDescription=_useState4[0],setModifiedDescription=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),usersList=_useState6[0],setUsersList=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),modifiedSelectedUsers=_useState8[0],setModifiedSelectedUsers=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),modifiedStartDate=_useState10[0],setModifiedStartDate=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),modifiedEndDate=_useState12[0],setModifiedEndDate=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),initiativeType=_useState14[0],setInitiativeType=_useState14[1];var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getAllUsersEmail(tokenData);case 2:response=_context.sent;if(isInstanceOfAuthError(response)){navigate('/error',{state:{error:response}});}else{setUsersList(response);}case 4:case\"end\":return _context.stop();}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();var getInitiative=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getInitiativeByID(tokenData,initiativePassed.id);case 2:response=_context2.sent;if(!isInstanceOfAuthError(response)){_context2.next=7;break;}navigate('/error',{state:{error:response}});_context2.next=14;break;case 7:setModifiedDescription(response.description);setModifiedSelectedUsers(response.idOrganizers);setModifiedStartDate(dayjs.unix(response.startDate));setModifiedEndDate(dayjs.unix(response.endDate));setInitiativeType(InitiativeType[response.type]);setInitiative(response);return _context2.abrupt(\"return\",true);case 14:return _context2.abrupt(\"return\",false);case 15:case\"end\":return _context2.stop();}},_callee2);}));return function getInitiative(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(!initiative){getInitiative();}},[]);useEffect(function(){if(initiative){//set all\nif(usersList===null&&!isVisitor&&user.email===initiative.idCreator){getUsers();}}},[initiative]);var somethingChanged=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(message){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getInitiative();case 2:response=_context3.sent;if(response){if(message){setOpen(true);setMessage(message);}}else if(!response){setOpenError(true);setMessageError(\"Errore nel caricamento dei dati\");}else{navigate('/error',{state:{error:response}});}case 4:case\"end\":return _context3.stop();}},_callee3);}));return function somethingChanged(_x){return _ref3.apply(this,arguments);};}();var handleStartDateChanged=function handleStartDateChanged(newValue){if(dayjs(newValue,'DD/MM/YYYY',true).isValid()){setModifiedStartDate(newValue);}else{console.log(\"Invalid date\");}};var handleEndDateChanged=function handleEndDateChanged(newValue){if(dayjs(newValue,'DD/MM/YYYY',true).isValid()){setModifiedEndDate(newValue);}else{console.log(\"Invalid date\");}};var userIsOrganizer=function userIsOrganizer(){if(initiative){return initiative.idOrganizers.includes(user.email);}return false;};var isReadOnly=function isReadOnly(){if(initiative){if(userIsOrganizer()){return false;}else return user.email!==initiative.idCreator;}};var handleChange=function handleChange(event){setModifiedDescription(event.target.value);};function toTimestamp(strDate){var datum=Date.parse(strDate);return datum/1000;}function checkDataChanged(date,oldDate){if(date===null){return false;}else{return date.unix()!==oldDate;}}var handleModify=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var newInitiative,response,_response;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!initiative){_context4.next=18;break;}if(isReadOnly()){_context4.next=18;break;}if(!(initiative.description!==modifiedDescription||checkDataChanged(modifiedStartDate,initiative.startDate)||checkDataChanged(modifiedEndDate,initiative.endDate))){_context4.next=8;break;}newInitiative={id:initiative.id,idCreator:initiative.idCreator,idOrganizers:initiative.idOrganizers,description:modifiedDescription&&initiative.description!==modifiedDescription?modifiedDescription:initiative.description,startDate:modifiedStartDate&&checkDataChanged(modifiedStartDate,initiative.startDate)?toTimestamp(modifiedStartDate.toString()):initiative.startDate,endDate:modifiedEndDate&&checkDataChanged(modifiedEndDate,initiative.endDate)?toTimestamp(modifiedEndDate.toString()):initiative.endDate,type:initiative.type,idMembers:initiative.idMembers,location:initiative.location,name:initiative.name};_context4.next=6;return modifyInitiative(tokenData,newInitiative);case 6:response=_context4.sent;if(typeof response==='boolean'){if(response){somethingChanged(\"Dati iniziative modificati con successo\");}else{setOpenError(true);setMessageError(\"Non è stato possibile modificare gli organizzatori\");}}else{navigate('/error',{state:{error:response}});}case 8:if(!(modifiedSelectedUsers&&modifiedSelectedUsers.length>0)){_context4.next=18;break;}if(!(initiative.idOrganizers!==modifiedSelectedUsers)){_context4.next=18;break;}if(!(user.email===initiative.idCreator||userIsOrganizer())){_context4.next=17;break;}_context4.next=13;return changeOrganizers(tokenData,initiative.id,modifiedSelectedUsers);case 13:_response=_context4.sent;if(typeof _response==='boolean'){if(_response){somethingChanged(\"Organizzatori modificati con successo\");}else{setOpenError(true);setMessageError(\"Non è stato possibile modificare gli organizzatori\");}}else{navigate('/error',{state:{error:_response}});}_context4.next=18;break;case 17:console.log('non puoi');case 18:case\"end\":return _context4.stop();}},_callee4);}));return function handleModify(){return _ref4.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var response;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:if(!(tokenData!==null)){_context5.next=5;break;}_context5.next=3;return logoutUser(tokenData);case 3:response=_context5.sent;if(typeof response==='boolean'){if(response){navigate('/');}else{console.log('error');}}else{navigate('/error',{state:{error:response}});}case 5:case\"end\":return _context5.stop();}},_callee5);}));return function logout(){return _ref5.apply(this,arguments);};}();var goBack=function goBack(){navigate(-1);};var handleUserAdd=function handleUserAdd(user){if(modifiedSelectedUsers){if(!modifiedSelectedUsers.includes(user)){setModifiedSelectedUsers([].concat(_toConsumableArray(modifiedSelectedUsers),[user]));}}};var handleDelete=function handleDelete(userToDelete){return function(){if(modifiedSelectedUsers){setModifiedSelectedUsers(modifiedSelectedUsers.filter(function(user){return user!==userToDelete;}));}};};var handleSubscribe=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){var response;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(!initiative){_context6.next=5;break;}_context6.next=3;return subscribeInitiative(tokenData,initiative.id);case 3:response=_context6.sent;if(typeof response==='boolean'){if(response){somethingChanged('Iscrizione avvenuta con successo');}else{setOpenError(true);setMessageError('Non è stato possibile iscriverti');}}else{navigate('/error',{state:{error:response}});}case 5:case\"end\":return _context6.stop();}},_callee6);}));return function handleSubscribe(){return _ref6.apply(this,arguments);};}();var handleUnSubscribe=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var response;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if(!initiative){_context7.next=5;break;}_context7.next=3;return unsubscribeInitiative(tokenData,initiative.id);case 3:response=_context7.sent;if(typeof response==='boolean'){if(response){somethingChanged('Sei stato rimosso dall\\'iniziative');}else{setOpenError(true);setMessageError(\"Non è stato possibile cancellare la tua iscrizione\");}}else{navigate('/error',{state:{error:response}});}case 5:case\"end\":return _context7.stop();}},_callee7);}));return function handleUnSubscribe(){return _ref7.apply(this,arguments);};}();var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),open=_useState16[0],setOpen=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),openError=_useState20[0],setOpenError=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),messageError=_useState22[0],setMessageError=_useState22[1];var handleClickError=function handleClickError(){setOpenError(true);};var handleCloseError=function handleCloseError(event,reason){if(reason==='clickaway'){return;}setOpenError(false);};var handleClose=function handleClose(event,reason){if(reason==='clickaway'){return;}setOpen(false);};var Alert=/*#__PURE__*/React.forwardRef(function Alert(props,ref){return/*#__PURE__*/_jsx(MuiAlert,_objectSpread({elevation:6,ref:ref,variant:\"filled\"},props));});var handleDeleteInitiative=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){var response;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:if(!initiative){_context8.next=5;break;}_context8.next=3;return deleteInitiative(tokenData,initiative.id);case 3:response=_context8.sent;if(typeof response==='boolean'){if(response){navigate(-1);}else{setOpenError(true);setMessageError(\"Non è stato possibile eliminare l'iniziativa\");}}else{navigate('/error',{state:{error:response}});}case 5:case\"end\":return _context8.stop();}},_callee8);}));return function handleDeleteInitiative(){return _ref8.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[initiative?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1},children:/*#__PURE__*/_jsx(AppBar,{position:\"fixed\",sx:{backgroundColor:'#3d4347'},children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",edge:\"start\",\"aria-label\":\"menu\",sx:{mr:2},children:/*#__PURE__*/_jsx(ArrowBackIcon,{onClick:goBack,sx:{fontSize:'3rem',color:'white'}})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1},style:{justifyContent:'center',color:'white',textAlign:'center',fontSize:'1.8rem'},children:\"Dettagli initiativa\"}),/*#__PURE__*/_jsx(Button,{sx:{color:'white',backgroundColor:'red'},onClick:logout,children:\"logout\"})]})})})}),/*#__PURE__*/_jsxs(Grid,{container:true,display:\"flex\",justifyContent:\"flex-start\",alignItems:\"center\",sx:{width:'100%',marginTop:'65px'},spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{style:{justifyContent:'center',color:'white',textAlign:'center',fontSize:'1.8rem'},children:initiative.name})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{sx:{color:initiativeType?InitiativeTypeColor[initiativeType]:null,fontWeight:'bold',fontSize:'1.2rem'},children:initiative.type})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Box,{sx:{width:'100%',height:'100%',border:'2.5px solid #feac0d'},children:/*#__PURE__*/_jsx(CssTextField,{sx:{width:'100%',height:'100%'},value:modifiedDescription,maxRows:5,onChange:handleChange,multiline:true,InputProps:{readOnly:isReadOnly(),inputProps:{style:{color:'white'}}}})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Box,{sx:{width:1},children:/*#__PURE__*/_jsxs(Box,{display:\"grid\",gridTemplateColumns:\"repeat(12, 1fr)\",gap:2,children:[/*#__PURE__*/_jsx(Box,{gridColumn:\"span 6\",children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDayjs,children:/*#__PURE__*/_jsx(DatePicker,{inputFormat:\"DD/MM/YYYY\",label:\"Data inizio\",value:modifiedStartDate,onChange:!isReadOnly()?function(newValue){handleStartDateChanged(newValue);}:function(){console.log('non puoi');},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(CssTextField,_objectSpread(_objectSpread({},params),{},{sx:{input:{color:'white'},style:{color:'white'}}}));}})})}),/*#__PURE__*/_jsx(Box,{gridColumn:\"span 6\",children:/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDayjs,children:/*#__PURE__*/_jsx(DatePicker,{inputFormat:\"DD/MM/YYYY\",label:\"Data fine\",value:modifiedEndDate,onChange:!isReadOnly()?function(newValue){handleEndDateChanged(newValue);}:function(){console.log('non puoi');},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(CssTextField,_objectSpread(_objectSpread({},params),{},{sx:{input:{color:'white'},style:{color:'white'}}}));}})})})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{sx:{textAlign:\"center\"},children:\"Creatore: \"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Chip,{sx:{backgroundColor:'#feac0d'},icon:/*#__PURE__*/_jsx(AccountCircleIcon,{sx:{color:'white'}}),label:initiative.idCreator})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{sx:{textAlign:\"center\"},children:\"Organizzatori: \"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:modifiedSelectedUsers?modifiedSelectedUsers.map(function(organizer){return/*#__PURE__*/_jsx(Grid,{item:true,display:\"flex\",xs:12,justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Chip,{sx:{backgroundColor:'#feac0d',marginTop:'10px',textAlign:'center'},icon:/*#__PURE__*/_jsx(AccountCircleIcon,{sx:{color:'white'}}),label:organizer,onDelete:organizer===user.email||user.email===initiative.idCreator?handleDelete(organizer):undefined})});}):null}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{sx:{textAlign:\"center\"},children:\"Sottoscrizioni: \"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:initiative.idMembers.map(function(member){return/*#__PURE__*/_jsx(Grid,{item:true,display:\"flex\",xs:12,justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Chip,{sx:{backgroundColor:'#feac0d',marginTop:'10px',textAlign:'center'},icon:/*#__PURE__*/_jsx(AccountCircleIcon,{sx:{color:'white'}}),label:member})});})}),user&&user.email===initiative.idCreator&&!isVisitor?/*#__PURE__*/_jsx(Grid,{item:true,xs:12,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(FormControl,{sx:{width:'70%'},children:/*#__PURE__*/_jsx(CssTextField,{sx:{input:{color:'white'},style:{color:'white'}},select:true,label:\"Organizzatori\",InputProps:{inputProps:{style:{color:'white'}}},children:usersList?usersList.map(function(user){return/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){handleUserAdd(user);},value:user,children:user});}):null})})}):null,/*#__PURE__*/_jsx(Grid,{item:true,xs:12,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:isVisitor?null:user.admin?null:initiative.idCreator===user.email?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{disabled:user.status===UserStatus.SUSPENDED,style:{borderRadius:35,backgroundColor:\"#92d36e\",padding:\"10px 20px\",fontSize:\"15px\",marginBottom:'20px'},onClick:handleModify,variant:\"contained\",children:\"Modifica\"}),/*#__PURE__*/_jsx(Button,{style:{borderRadius:35,backgroundColor:\"red\",padding:\"10px 20px\",fontSize:\"15px\",marginLeft:'30px',marginBottom:'20px'},disabled:user.status===UserStatus.SUSPENDED,variant:\"contained\",onClick:handleDeleteInitiative,children:\"Cancella\"})]}):userIsOrganizer()?/*#__PURE__*/_jsx(Button,{disabled:user.status===UserStatus.SUSPENDED,style:{borderRadius:35,backgroundColor:\"#92d36e\",padding:\"10px 20px\",fontSize:\"15px\",marginBottom:'20px'},onClick:handleModify,variant:\"contained\",children:\"Modifica\"}):!initiative.idMembers.includes(user.email)?/*#__PURE__*/_jsx(Button,{style:{borderRadius:35,backgroundColor:\"#92d36e\",padding:\"10px 20px\",fontSize:\"15px\",marginBottom:'20px'},onClick:handleSubscribe,variant:\"contained\",children:\"Partecipa\"}):/*#__PURE__*/_jsx(Button,{style:{borderRadius:35,backgroundColor:\"#92d36e\",padding:\"10px 20px\",fontSize:\"15px\",marginBottom:'20px'},onClick:handleUnSubscribe,variant:\"contained\",children:\"Disiscriviti\"})})]})]}):null,/*#__PURE__*/_jsx(Stack,{spacing:2,sx:{width:'100%'},children:/*#__PURE__*/_jsx(Snackbar,{open:open,autoHideDuration:3000,onClose:handleClose,anchorOrigin:{vertical:\"bottom\",horizontal:'center'},children:/*#__PURE__*/_jsx(Alert,{onClose:handleClose,severity:\"success\",sx:{width:'100%'},children:message})})}),/*#__PURE__*/_jsx(Stack,{spacing:2,sx:{width:'100%'},children:/*#__PURE__*/_jsx(Snackbar,{open:openError,autoHideDuration:3000,onClose:handleCloseError,anchorOrigin:{vertical:\"bottom\",horizontal:'center'},children:/*#__PURE__*/_jsx(Alert,{onClose:handleCloseError,severity:\"warning\",sx:{width:'100%'},children:messageError})})})]});};export default InitiativeDetails;","map":{"version":3,"names":["AppBar","Button","Chip","Grid","IconButton","Typography","React","useEffect","useState","Box","CssTextField","useLocation","useNavigate","Toolbar","ArrowBackIcon","isInstanceOfAuthError","logoutUser","AccountCircleIcon","FormControl","MenuItem","getAllUsersEmail","UserStatus","dayjs","changeOrganizers","deleteInitiative","getInitiativeByID","InitiativeType","InitiativeTypeColor","modifyInitiative","subscribeInitiative","unsubscribeInitiative","AdapterDayjs","DatePicker","LocalizationProvider","MuiAlert","Snackbar","Stack","InitiativeDetails","location","initiativePassed","state","initiative","tokenData","token","user","isVisitor","navigate","setInitiative","modifiedDescription","setModifiedDescription","usersList","setUsersList","modifiedSelectedUsers","setModifiedSelectedUsers","modifiedStartDate","setModifiedStartDate","modifiedEndDate","setModifiedEndDate","initiativeType","setInitiativeType","getUsers","response","error","getInitiative","id","description","idOrganizers","unix","startDate","endDate","type","email","idCreator","somethingChanged","message","setOpen","setMessage","setOpenError","setMessageError","handleStartDateChanged","newValue","isValid","console","log","handleEndDateChanged","userIsOrganizer","includes","isReadOnly","handleChange","event","target","value","toTimestamp","strDate","datum","Date","parse","checkDataChanged","date","oldDate","handleModify","newInitiative","toString","idMembers","name","length","logout","goBack","handleUserAdd","handleDelete","userToDelete","filter","handleSubscribe","handleUnSubscribe","open","openError","messageError","handleClickError","handleCloseError","reason","handleClose","Alert","forwardRef","props","ref","handleDeleteInitiative","flexGrow","backgroundColor","mr","fontSize","color","justifyContent","textAlign","width","marginTop","fontWeight","height","border","readOnly","inputProps","style","params","input","map","organizer","undefined","member","admin","status","SUSPENDED","borderRadius","padding","marginBottom","marginLeft","vertical","horizontal"],"sources":["/home/michelestaffieri/Documenti/Taass/CivicLife/CivicLife/frontend/src/Initiative/initiativeDetails.tsx"],"sourcesContent":["import {AppBar, Button, Chip, Grid, IconButton, Typography,} from \"@mui/material\";\nimport '../App.css'\nimport React, {useEffect, useState} from \"react\";\nimport Box from '@mui/material/Box';\nimport {CssTextField} from \"../Utils/CustomComponents\";\nimport {useLocation, useNavigate} from \"react-router-dom\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport ArrowBackIcon from \"@mui/icons-material/ArrowBack\";\nimport {isInstanceOfAuthError, logoutUser, TokenData} from \"../APIs/OauthAPI\";\nimport AccountCircleIcon from \"@mui/icons-material/AccountCircle\";\nimport FormControl from \"@mui/material/FormControl\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport {getAllUsersEmail, User, UserStatus} from \"../APIs/UsersAPI\";\nimport dayjs, {Dayjs} from \"dayjs\";\nimport {\n    changeOrganizers,\n    deleteInitiative,\n    getInitiativeByID,\n    Initiative,\n    InitiativeType,\n    InitiativeTypeColor,\n    modifyInitiative,\n    subscribeInitiative,\n    unsubscribeInitiative\n} from \"../APIs/InitiativeAPI\";\nimport {AdapterDayjs} from \"@mui/x-date-pickers/AdapterDayjs\";\nimport {DatePicker, LocalizationProvider} from \"@mui/x-date-pickers\";\nimport MuiAlert, {AlertProps} from \"@mui/material/Alert\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport Stack from \"@mui/material/Stack\";\n\n\nconst InitiativeDetails = () => {\n    const location = useLocation()\n    const initiativePassed : Initiative= location.state.initiative\n    const tokenData: TokenData = location.state.token\n    const user :User= location.state.user\n    const isVisitor : boolean= location.state.isVisitor\n    const navigate = useNavigate()\n\n    const [initiative, setInitiative] = useState<Initiative | null>(null)\n\n    const [modifiedDescription, setModifiedDescription] = useState<string | null>(null)\n    const [usersList, setUsersList] = useState<string[] | null>(null)\n    const [modifiedSelectedUsers, setModifiedSelectedUsers] = useState<string[] | null>(null)\n    const [modifiedStartDate, setModifiedStartDate] = useState<Dayjs | null>(null)\n    const [modifiedEndDate, setModifiedEndDate] = useState<Dayjs | null>(null)\n    const [initiativeType, setInitiativeType] = useState<InitiativeType | null>(null)\n\n    const getUsers = async () => {\n        const response = await getAllUsersEmail(tokenData)\n        if (isInstanceOfAuthError(response)) {\n            navigate('/error', {state: {error: response}})\n        } else {\n            setUsersList(response)\n        }\n    }\n\n    const getInitiative = async (): Promise<boolean> => {\n        const response = await getInitiativeByID(tokenData, initiativePassed.id)\n        if (isInstanceOfAuthError(response)) {\n            navigate('/error', {state: {error: response}})\n        } else {\n            setModifiedDescription(response.description)\n            setModifiedSelectedUsers(response.idOrganizers)\n            setModifiedStartDate(dayjs.unix(response.startDate))\n            setModifiedEndDate(dayjs.unix(response.endDate))\n            setInitiativeType(InitiativeType[response.type])\n            setInitiative(response)\n            return true\n        }\n        return false\n\n    }\n\n    useEffect(() => {\n        if (!initiative) {\n            getInitiative()\n        }\n    }, [])\n\n    useEffect(() => {\n        if (initiative) {\n            //set all\n\n\n            if (usersList === null && !isVisitor && user.email === initiative.idCreator) {\n                getUsers()\n            }\n        }\n\n    }, [initiative])\n\n    const somethingChanged = async (message?: string) => {\n        const response = await getInitiative()\n        if (response) {\n            if (message) {\n                setOpen(true)\n                setMessage(message)\n            }\n        } else if (!response) {\n            setOpenError(true)\n            setMessageError(\"Errore nel caricamento dei dati\")\n        } else {\n            navigate('/error', {state: {error: response}})\n        }\n    }\n\n\n    const handleStartDateChanged = (newValue: Dayjs | null) => {\n        if (dayjs(newValue, 'DD/MM/YYYY', true).isValid()) {\n            setModifiedStartDate(newValue);\n        } else {\n            console.log(\"Invalid date\")\n        }\n    }\n\n    const handleEndDateChanged = (newValue: Dayjs | null) => {\n        if (dayjs(newValue, 'DD/MM/YYYY', true).isValid()) {\n            setModifiedEndDate(newValue);\n        } else {\n            console.log(\"Invalid date\")\n        }\n    }\n\n    const userIsOrganizer = () => {\n        if (initiative) {\n            return (initiative.idOrganizers.includes(user.email));\n        }\n        return false;\n    }\n\n    const isReadOnly = () => {\n        if (initiative) {\n            if (userIsOrganizer()) {\n                return false\n            } else return user.email !== initiative.idCreator;\n        }\n    }\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setModifiedDescription(event.target.value)\n    }\n\n    function toTimestamp(strDate: string) {\n        const datum = Date.parse(strDate);\n        return datum / 1000;\n    }\n\n    function checkDataChanged(date: Dayjs | null, oldDate: number) {\n        if (date === null) {\n            return false\n        } else {\n            return date.unix() !== oldDate\n        }\n    }\n\n    const handleModify = async () => {\n        if (initiative) {\n            if (!isReadOnly()) {\n                if (initiative.description !== modifiedDescription ||\n                    checkDataChanged(modifiedStartDate, initiative.startDate) ||\n                    checkDataChanged(modifiedEndDate, initiative.endDate)) {\n\n                    const newInitiative: Initiative = {\n                        id: initiative.id,\n                        idCreator: initiative.idCreator,\n                        idOrganizers: initiative.idOrganizers,\n                        description: modifiedDescription && (initiative.description !== modifiedDescription) ? modifiedDescription : initiative.description,\n                        startDate: modifiedStartDate && checkDataChanged(modifiedStartDate, initiative.startDate) ? toTimestamp(modifiedStartDate.toString()) : initiative.startDate,\n                        endDate: modifiedEndDate && checkDataChanged(modifiedEndDate, initiative.endDate) ? toTimestamp(modifiedEndDate.toString()) : initiative.endDate,\n                        type: initiative.type,\n                        idMembers: initiative.idMembers,\n                        location: initiative.location,\n                        name: initiative.name,\n                    }\n                    const response = await modifyInitiative(tokenData, newInitiative)\n                    if (typeof response === 'boolean') {\n                        if (response) {\n                            somethingChanged(\"Dati iniziative modificati con successo\")\n                        } else {\n                            setOpenError(true)\n                            setMessageError(\"Non è stato possibile modificare gli organizzatori\")\n                        }\n                    } else {\n                        navigate('/error', {state: {error: response}})\n\n                    }\n                }\n                if (modifiedSelectedUsers && modifiedSelectedUsers.length > 0) {\n                    if (initiative.idOrganizers !== modifiedSelectedUsers) {\n                        if (user.email === initiative.idCreator || userIsOrganizer()) {\n                            const response = await changeOrganizers(tokenData, initiative.id, modifiedSelectedUsers)\n                            if (typeof response === 'boolean') {\n                                if (response) {\n                                    somethingChanged(\"Organizzatori modificati con successo\")\n                                } else {\n                                    setOpenError(true)\n                                    setMessageError(\"Non è stato possibile modificare gli organizzatori\")\n                                }\n                            } else {\n                                navigate('/error', {state: {error: response}})\n                            }\n                        } else {\n                            console.log('non puoi')\n                        }\n                    }\n                }\n            }\n        }\n\n    }\n\n    const logout = async () => {\n        if (tokenData !== null) {\n            const response = await logoutUser(tokenData)\n            if (typeof response === 'boolean') {\n                if (response) {\n                    navigate('/')\n                } else {\n                    console.log('error')\n                }\n            } else {\n                navigate('/error', {state: {error: response}})\n            }\n        }\n    }\n\n    const goBack = () => {\n        navigate(-1)\n    }\n\n    const handleUserAdd = (user: any) => {\n        if (modifiedSelectedUsers) {\n            if (!modifiedSelectedUsers.includes(user)) {\n                setModifiedSelectedUsers([...modifiedSelectedUsers, user])\n            }\n        }\n    }\n\n    const handleDelete = (userToDelete: any) => () => {\n        if (modifiedSelectedUsers) {\n            setModifiedSelectedUsers(modifiedSelectedUsers.filter((user) => user !== userToDelete))\n        }\n    };\n\n    const handleSubscribe = async () => {\n\n        if (initiative) {\n            const response = await subscribeInitiative(tokenData, initiative.id)\n            if (typeof response === 'boolean') {\n                if (response) {\n                    somethingChanged('Iscrizione avvenuta con successo')\n                } else {\n                    setOpenError(true)\n                    setMessageError('Non è stato possibile iscriverti')\n                }\n            } else {\n                navigate('/error', {state: {error: response}})\n            }\n        }\n\n    }\n\n    const handleUnSubscribe = async () => {\n        if (initiative) {\n            const response = await unsubscribeInitiative(tokenData, initiative.id)\n            if (typeof response === 'boolean') {\n                if (response) {\n                    somethingChanged('Sei stato rimosso dall\\'iniziative')\n                } else {\n                    setOpenError(true)\n                    setMessageError(\"Non è stato possibile cancellare la tua iscrizione\")\n                }\n            } else {\n                navigate('/error', {state: {error: response}})\n            }\n        }\n    }\n\n    const [open, setOpen] = useState(false);\n    const [message, setMessage] = useState<string>('')\n    const [openError, setOpenError] = useState(false);\n    const [messageError, setMessageError] = useState<string>('')\n\n\n    const handleClickError = () => {\n        setOpenError(true);\n    }\n\n    const handleCloseError = (event?: React.SyntheticEvent | Event, reason?: string) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setOpenError(false);\n    }\n\n    const handleClose = (event?: React.SyntheticEvent | Event, reason?: string) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setOpen(false);\n    };\n\n    const Alert = React.forwardRef<HTMLDivElement, AlertProps>(function Alert(\n        props,\n        ref,\n    ) {\n        return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n    });\n\n    const handleDeleteInitiative = async () => {\n        if (initiative) {\n            const response = await deleteInitiative(tokenData, initiative.id)\n            if (typeof response === 'boolean') {\n                if (response) {\n                    navigate(-1)\n                } else {\n                    setOpenError(true)\n                    setMessageError(\"Non è stato possibile eliminare l'iniziativa\")\n                }\n            } else {\n                navigate('/error', {state: {error: response}})\n            }\n        }\n    }\n\n\n    return (\n        <>\n            {\n                initiative ?\n                    <><Grid item xs={12} justifyContent=\"center\" alignItems=\"center\">\n                        <Box sx={{flexGrow: 1}}>\n                            <AppBar position=\"fixed\" sx={{backgroundColor: '#3d4347'}}>\n                                <Toolbar>\n                                    <IconButton\n                                        size=\"small\"\n                                        edge=\"start\"\n                                        aria-label=\"menu\"\n                                        sx={{mr: 2}}\n                                    >\n                                        <ArrowBackIcon onClick={goBack} sx={{fontSize: '3rem', color: 'white'}}/>\n                                    </IconButton>\n                                    <Typography variant=\"h6\" component=\"div\" sx={{flexGrow: 1}}\n                                                style={{\n                                                    justifyContent: 'center',\n                                                    color: 'white',\n                                                    textAlign: 'center',\n                                                    fontSize: '1.8rem',\n                                                }}>Dettagli initiativa\n                                    </Typography>\n                                    <Button sx={{color: 'white', backgroundColor: 'red'}}\n                                            onClick={logout}>\n                                        logout\n                                    </Button>\n                                </Toolbar>\n                            </AppBar>\n                        </Box>\n                    </Grid>\n\n                        <Grid container display=\"flex\" justifyContent=\"flex-start\" alignItems=\"center\"\n                              sx={{width: '100%', marginTop: '65px'}} spacing={3}>\n\n                            <Grid item xs={12}>\n                                <Typography\n                                    style={{\n                                        justifyContent: 'center',\n                                        color: 'white',\n                                        textAlign: 'center',\n                                        fontSize: '1.8rem',\n                                    }}>{initiative.name}\n                                </Typography>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <Typography sx={{\n                                    color: initiativeType ? InitiativeTypeColor[initiativeType] : null,\n                                    fontWeight: 'bold',\n                                    fontSize: '1.2rem'\n                                }}>{initiative.type}</Typography>\n                            </Grid>\n\n                            <Grid item xs={12}>\n                                <Box sx={{width: '100%', height: '100%', border: '2.5px solid #feac0d',}}>\n                                    <CssTextField\n                                        sx={{width: '100%', height: '100%',}}\n                                        value={modifiedDescription}\n                                        maxRows={5}\n                                        onChange={handleChange}\n                                        multiline\n                                        InputProps={{\n                                            readOnly: isReadOnly(),\n                                            inputProps: {\n                                                style: {\n                                                    color: 'white',\n                                                }\n                                            }\n                                        }}/>\n                                </Box>\n                            </Grid>\n\n                            <Grid item xs={12}>\n                                <Box sx={{width: 1}}>\n                                    <Box display=\"grid\" gridTemplateColumns=\"repeat(12, 1fr)\" gap={2}>\n                                        <Box gridColumn=\"span 6\">\n                                            <LocalizationProvider dateAdapter={AdapterDayjs}>\n                                                <DatePicker\n                                                    inputFormat=\"DD/MM/YYYY\"\n                                                    label='Data inizio'\n                                                    value={modifiedStartDate}\n                                                    onChange={!isReadOnly() ? (newValue) => {\n                                                        handleStartDateChanged(newValue);\n                                                    } : () => {\n                                                        console.log('non puoi');\n                                                    }}\n                                                    renderInput={(params) => <CssTextField {...params} sx={{\n                                                        input: {color: 'white'},\n                                                        style: {color: 'white'}\n                                                    }}/>}/>\n                                            </LocalizationProvider>\n                                        </Box>\n                                        <Box gridColumn=\"span 6\">\n                                            <LocalizationProvider dateAdapter={AdapterDayjs}>\n                                                <DatePicker\n                                                    inputFormat=\"DD/MM/YYYY\"\n                                                    label=\"Data fine\"\n                                                    value={modifiedEndDate}\n                                                    onChange={!isReadOnly() ? (newValue) => {\n                                                        handleEndDateChanged(newValue);\n                                                    } : () => {\n                                                        console.log('non puoi');\n                                                    }}\n                                                    renderInput={(params) => <CssTextField {...params} sx={{\n                                                        input: {color: 'white'},\n                                                        style: {color: 'white'}\n                                                    }}/>}/>\n                                            </LocalizationProvider>\n                                        </Box>\n                                    </Box>\n                                </Box>\n                            </Grid>\n\n                            <Grid item xs={12}>\n                                <Typography sx={{textAlign: \"center\"}}>Creatore: </Typography>\n                            </Grid>\n                            <Grid item xs={12} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n                                <Chip sx={{backgroundColor: '#feac0d'}}\n                                      icon={<AccountCircleIcon sx={{color: 'white'}}/>}\n                                      label={initiative.idCreator}/>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <Typography sx={{textAlign: \"center\"}}>Organizzatori: </Typography>\n                            </Grid>\n                            <Grid item xs={12}>\n                                {modifiedSelectedUsers ? modifiedSelectedUsers.map((organizer: string) => {\n                                    return (\n                                        <Grid item display=\"flex\" xs={12} justifyContent=\"center\" alignItems=\"center\">\n                                            <Chip sx={{\n                                                backgroundColor: '#feac0d',\n                                                marginTop: '10px',\n                                                textAlign: 'center'\n                                            }}\n                                                  icon={<AccountCircleIcon sx={{color: 'white'}}/>}\n                                                  label={organizer}\n                                                  onDelete={organizer === user.email || user.email === initiative.idCreator ? handleDelete(organizer) : undefined}/>\n                                        </Grid>);\n                                }) : null}\n                            </Grid>\n                            <Grid item xs={12}>\n                                <Typography sx={{textAlign: \"center\"}}>Sottoscrizioni: </Typography>\n                            </Grid>\n                            <Grid item xs={12}>\n                                {initiative.idMembers.map((member: string) => {\n                                    return (\n                                        <Grid item display=\"flex\" xs={12} justifyContent=\"center\" alignItems=\"center\">\n                                            <Chip sx={{\n                                                backgroundColor: '#feac0d',\n                                                marginTop: '10px',\n                                                textAlign: 'center'\n                                            }}\n                                                  icon={<AccountCircleIcon sx={{color: 'white'}}/>}\n                                                  label={member}/>\n                                        </Grid>);\n                                })}\n                            </Grid>\n                            {user && user.email === initiative.idCreator && !isVisitor ?\n                                <Grid item xs={12} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n                                    <FormControl sx={{width: '70%'}}>\n                                        <CssTextField sx={{input: {color: 'white'}, style: {color: 'white'}}}\n                                                      select\n                                                      label='Organizzatori' InputProps={{inputProps: {style: {color: 'white',}}}}>\n\n                                            {usersList ? usersList.map((user) => {return (<MenuItem onClick={() => {handleUserAdd(user);}} value={user}>{user}</MenuItem>)}) : null}\n                                        </CssTextField>\n                                    </FormControl>\n                                </Grid>\n                                :\n                                null\n                            }\n                            <Grid item xs={12} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n                                {isVisitor ? null : user.admin ?\n                                    null\n                                    :\n                                    initiative.idCreator === user.email ?\n                                        <>\n                                            <Button\n                                                disabled={user.status === UserStatus.SUSPENDED}\n                                                style={{\n                                                    borderRadius: 35,\n                                                    backgroundColor: \"#92d36e\",\n                                                    padding: \"10px 20px\",\n                                                    fontSize: \"15px\",\n                                                    marginBottom: '20px'\n                                                }}\n                                                onClick={handleModify} variant=\"contained\">\n                                                Modifica\n                                            </Button>\n                                            <Button style={{\n                                                borderRadius: 35,\n                                                backgroundColor: \"red\",\n                                                padding: \"10px 20px\",\n                                                fontSize: \"15px\",\n                                                marginLeft: '30px',\n                                                marginBottom: '20px'\n                                            }} disabled={user.status === UserStatus.SUSPENDED}\n                                                    variant=\"contained\"\n                                                    onClick={handleDeleteInitiative}\n                                            >\n                                                Cancella\n                                            </Button>\n                                        </>\n                                        :\n                                        userIsOrganizer() ?\n                                            <Button\n                                                disabled={user.status === UserStatus.SUSPENDED}\n                                                style={{\n                                                    borderRadius: 35,\n                                                    backgroundColor: \"#92d36e\",\n                                                    padding: \"10px 20px\",\n                                                    fontSize: \"15px\",\n                                                    marginBottom: '20px'\n                                                }}\n                                                onClick={handleModify} variant=\"contained\">\n                                                Modifica\n                                            </Button>\n                                            :\n                                            !initiative.idMembers.includes(user.email) ?\n                                                <Button style={{\n                                                    borderRadius: 35,\n                                                    backgroundColor: \"#92d36e\",\n                                                    padding: \"10px 20px\",\n                                                    fontSize: \"15px\",\n                                                    marginBottom: '20px'\n                                                }}\n                                                        onClick={handleSubscribe}\n                                                        variant=\"contained\">\n                                                    Partecipa\n                                                </Button>\n                                                :\n                                                <Button style={{\n                                                    borderRadius: 35,\n                                                    backgroundColor: \"#92d36e\",\n                                                    padding: \"10px 20px\",\n                                                    fontSize: \"15px\",\n                                                    marginBottom: '20px'\n                                                }}\n                                                        onClick={handleUnSubscribe}\n                                                        variant=\"contained\">\n                                                    Disiscriviti\n                                                </Button>}\n                            </Grid>\n                        </Grid></> : null\n            }\n            <Stack spacing={2} sx={{width: '100%'}}>\n                <Snackbar open={open} autoHideDuration={3000} onClose={handleClose}\n                          anchorOrigin={{vertical: \"bottom\", horizontal: 'center'}}>\n                    <Alert onClose={handleClose} severity=\"success\" sx={{width: '100%'}}>\n                        {message}\n                    </Alert>\n                </Snackbar>\n            </Stack>\n            <Stack spacing={2} sx={{width: '100%'}}>\n                <Snackbar open={openError} autoHideDuration={3000} onClose={handleCloseError}\n                          anchorOrigin={{vertical: \"bottom\", horizontal: 'center'}}>\n                    <Alert onClose={handleCloseError} severity=\"warning\" sx={{width: '100%'}}>\n                        {messageError}\n                    </Alert>\n                </Snackbar>\n            </Stack>\n        </>\n\n    );\n}\n\nexport default InitiativeDetails;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}