{"ast":null,"code":"import _defineProperty from\"/home/michelestaffieri/Documenti/Taass/CivicLife/CivicLife/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/home/michelestaffieri/Documenti/Taass/CivicLife/CivicLife/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Button,Grid,styled,TableBody,TableContainer,TableHead,Typography}from\"@mui/material\";import{useLocation,useNavigate}from\"react-router-dom\";import Table from'@mui/material/Table';import TableCell,{tableCellClasses}from'@mui/material/TableCell';import TableRow from'@mui/material/TableRow';import CancelTwoToneIcon from'@mui/icons-material/CancelTwoTone';import{ValidateCode}from\"./APIs/OauthAPI\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Error=function Error(){var location=useLocation();var error=location.state.error;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),errorReason=_useState2[0],setErrorReason=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),infoList=_useState4[0],setInfoList=_useState4[1];useEffect(function(){if(infoList.length===0&&error!==undefined){console.log(error);setErrorReason(error);splittedRequest(error);}else if(window.location.href.includes('errorReason=')){var _errorReason=window.location.href.split(\"errorReason=\")[1].toString();var authError=generateErrorReason(_errorReason);setErrorReason(authError);splittedRequest(authError);}else{navigate('/');}},[]);var StyledTableCell=styled(TableCell)(function(_ref){var _ref2;var theme=_ref.theme;return _ref2={},_defineProperty(_ref2,\"&.\".concat(tableCellClasses.head),{backgroundColor:theme.palette.common.black,color:theme.palette.common.white}),_defineProperty(_ref2,\"&.\".concat(tableCellClasses.body),{fontSize:14}),_ref2;});var generateErrorReason=function generateErrorReason(errorReason){var path=errorReason.split('requestedPath=')[1].split(',')[0];var method=errorReason.split('method=')[1].split(',')[0];var authError={code:ValidateCode.AUTH_SERVER_ERROR,requestedPath:path,method:method};return authError;};var splittedRequest=function splittedRequest(errorReason){if(errorReason!==null){var path=errorReason.requestedPath.split('/');var returnValue=[];var pathtoprint='';for(var value=0;value<path.length;value++){if(path[value]!==''){if(value===2){var split=path[value].split(':');returnValue.push(split[0]);returnValue.push(split[1]);}if(value===3){returnValue.push(path[value]);}if(value>4){pathtoprint+=path[value]+'/';}}}returnValue.push(pathtoprint);setInfoList(returnValue);}};return/*#__PURE__*/_jsxs(Grid,{container:true,direction:'column',spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(CancelTwoToneIcon,{style:{color:'red',fontSize:'7rem'}})}),/*#__PURE__*/_jsx(Grid,{item:true,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Typography,{variant:'h2',children:\"ATTENZIONE\"})}),infoList.length>3&&errorReason?/*#__PURE__*/_jsx(Grid,{item:true,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(TableContainer,{sx:{backgroundColor:'white',width:'90%'},children:/*#__PURE__*/_jsxs(Table,{\"aria-label\":\"customized-table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{children:\"info\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:\"value\"})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{component:\"th\",scope:\"row\",children:\"Error code\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:errorReason.code})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{component:\"th\",scope:\"row\",children:\"Method\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:errorReason.method})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{component:\"th\",scope:\"row\",children:\"IP\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:infoList[0]})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{component:\"th\",scope:\"row\",children:\"Port\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:infoList[1]})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{component:\"th\",scope:\"row\",children:\"Micro Service\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:infoList[2]})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(StyledTableCell,{component:\"th\",scope:\"row\",children:\"Api\"}),/*#__PURE__*/_jsx(StyledTableCell,{align:\"right\",children:infoList[3]})]})]})]})})}):null,/*#__PURE__*/_jsx(Grid,{item:true,display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Button,{style:{borderRadius:35,backgroundColor:\"red\",padding:\"10px 20px\",fontSize:\"18px\"},variant:\"contained\",onClick:function onClick(){navigate('/');},children:\"torna al login\"})})]});};export default Error;","map":{"version":3,"names":["React","useEffect","useState","Button","Grid","styled","TableBody","TableContainer","TableHead","Typography","useLocation","useNavigate","Table","TableCell","tableCellClasses","TableRow","CancelTwoToneIcon","ValidateCode","Error","location","error","state","navigate","errorReason","setErrorReason","infoList","setInfoList","length","undefined","console","log","splittedRequest","window","href","includes","split","toString","authError","generateErrorReason","StyledTableCell","theme","head","backgroundColor","palette","common","black","color","white","body","fontSize","path","method","code","AUTH_SERVER_ERROR","requestedPath","returnValue","pathtoprint","value","push","width","borderRadius","padding"],"sources":["/home/michelestaffieri/Documenti/Taass/CivicLife/CivicLife/frontend/src/Error.tsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {Button, Grid, styled, TableBody, TableContainer, TableHead, Typography} from \"@mui/material\";\nimport {useLocation, useNavigate} from \"react-router-dom\";\nimport Table from '@mui/material/Table';\nimport TableCell, {tableCellClasses} from '@mui/material/TableCell';\nimport TableRow from '@mui/material/TableRow';\nimport CancelTwoToneIcon from '@mui/icons-material/CancelTwoTone';\nimport {AuthError, ValidateCode} from \"./APIs/OauthAPI\";\n\nconst Error = () => {\n    const location = useLocation()\n    const error = location.state.error\n    const navigate = useNavigate()\n    const [errorReason, setErrorReason] = useState<AuthError|null>(null)\n    const [infoList, setInfoList] = useState<string[]>([])\n\n    useEffect(() => {\n        if (infoList.length === 0 && error!==undefined) {\n            console.log(error)\n            setErrorReason(error)\n            splittedRequest(error)\n        }\n        else if (window.location.href.includes('errorReason=')) {\n                const errorReason = window.location.href.split(\"errorReason=\")[1].toString()\n                const authError= generateErrorReason(errorReason)\n                setErrorReason(authError)\n                splittedRequest(authError)\n        } else{\n            navigate('/')\n        }\n    },[])\n\n    const StyledTableCell = styled(TableCell)(({theme}) => ({\n        [`&.${tableCellClasses.head}`]: {\n            backgroundColor: theme.palette.common.black,\n            color: theme.palette.common.white,\n        },\n        [`&.${tableCellClasses.body}`]: {\n            fontSize: 14,\n        },\n    }));\n\n    const generateErrorReason = (errorReason:string) => {\n        const path = errorReason.split('requestedPath=')[1].split(',')[0]\n        const method = errorReason.split('method=')[1].split(',')[0]\n        const authError : AuthError = {\n            code: ValidateCode.AUTH_SERVER_ERROR,\n            requestedPath: path,\n            method: method\n        }\n        return authError\n\n    }\n\n    const splittedRequest = (errorReason:AuthError) => {\n        if(errorReason!==null) {\n            const path = errorReason.requestedPath.split('/')\n            const returnValue = []\n            let pathtoprint = ''\n            for (let value = 0; value < path.length; value++) {\n                if (path[value] !== '') {\n                    if (value === 2) {\n                        let split = path[value].split(':')\n                        returnValue.push(split[0])\n                        returnValue.push(split[1])\n\n                    }\n                    if (value === 3) {\n                        returnValue.push(path[value])\n                    }\n                    if (value > 4) {\n                        pathtoprint += path[value] + '/'\n                    }\n                }\n            }\n            returnValue.push(pathtoprint)\n\n            setInfoList(returnValue)\n        }\n    }\n\n    return (\n        <Grid container direction={'column'} spacing={3}>\n            <Grid item display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n                <CancelTwoToneIcon style={{color: 'red', fontSize: '7rem'}}/>\n            </Grid>\n            <Grid item display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n                <Typography variant={'h2'}>\n                    ATTENZIONE\n                </Typography>\n            </Grid>\n            {\n                infoList.length > 3 && errorReason ?\n\n            <Grid item display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n                <TableContainer sx={{backgroundColor:'white', width:'90%'}}>\n                    <Table aria-label='customized-table'>\n                        <TableHead>\n                            <TableRow>\n                                <StyledTableCell>info</StyledTableCell>\n                                <StyledTableCell align='right'>value</StyledTableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            <TableRow>\n                                <StyledTableCell component='th' scope='row'>Error code</StyledTableCell>\n                                <StyledTableCell align='right'>{errorReason.code}</StyledTableCell>\n                            </TableRow>\n                            <TableRow>\n                                <StyledTableCell component='th' scope='row'>Method</StyledTableCell>\n                                <StyledTableCell align='right'>{errorReason.method}</StyledTableCell>\n                            </TableRow>\n                            <TableRow>\n                                <StyledTableCell component='th' scope='row'>IP</StyledTableCell>\n                                <StyledTableCell align='right'>{infoList[0]}</StyledTableCell>\n                            </TableRow>\n                            <TableRow>\n                                <StyledTableCell component='th' scope='row'>Port</StyledTableCell>\n                                <StyledTableCell align='right'>{infoList[1]}</StyledTableCell>\n                            </TableRow>\n                            <TableRow>\n                                <StyledTableCell component='th' scope='row'>Micro Service</StyledTableCell>\n                                <StyledTableCell align='right'>{infoList[2]}</StyledTableCell>\n                            </TableRow>\n                            <TableRow>\n                                <StyledTableCell component='th' scope='row'>Api</StyledTableCell>\n                                <StyledTableCell align='right'>{infoList[3]}</StyledTableCell>\n                            </TableRow>\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </Grid>: null\n            }\n            <Grid item display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n                <Button style={{\n                    borderRadius: 35,\n                    backgroundColor: \"red\",\n                    padding: \"10px 20px\",\n                    fontSize: \"18px\"\n                }}\n                        variant=\"contained\"\n                        onClick={() => {\n                            navigate('/')\n                        }}>\n                    torna al login\n                </Button>\n            </Grid>\n        </Grid>\n    );\n}\n\nexport default Error;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}